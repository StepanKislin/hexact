<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexAct - –î–µ—Ç–µ–∫—Ü–∏—è –±–æ–ª—Ç–æ–≤ –∏ –≥–∞–µ–∫</title>
    <link rel="stylesheet" href="assets/style/index.css" />
</head>
<body>
<div class="container">
    <div class="header-controls">
        <button id="theme-toggle">üåô –¢–µ–º–∞</button>
        <button id="fullscreen-btn">‚õ∂ –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</button>
    </div>

    <h1>üîç HexAct - –î–µ—Ç–µ–∫—Ü–∏—è –±–æ–ª—Ç–æ–≤ –∏ –≥–∞–µ–∫</h1>
    <div class="subtitle">–í–∏–¥–µ–æ ‚Üí Canvas ‚Üí –¢–µ–∫—É—â–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (–≤—Å–µ –≤ –ª–∏–Ω–∏—é)</div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="settings-panel">
        <div>
            <label>–ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: <span id="conf-threshold-value">60</span>%</label>
            <input type="range" id="confidence-threshold" min="50" max="95" value="60">
        </div>
        <div>
            <label>–ú–∏–Ω. —Ä–∞–∑–º–µ—Ä (px): <input type="number" id="min-size" value="800" min="100" max="5000"></label>
            <label>–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä (px): <input type="number" id="max-size" value="20000" min="1000" max="50000"></label>
        </div>
        <button id="calibrate-bg">üì∏ –ó–∞–ø–æ–º–Ω–∏—Ç—å —Ñ–æ–Ω</button>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats">
        <div class="stat-card">
            <div>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ</div>
            <div class="stat-value stat-total" id="correct-count">0</div>
        </div>
        <div class="stat-card">
            <div>–í—Å–µ–≥–æ</div>
            <div class="stat-value" id="total-count">0</div>
        </div>
        <div class="stat-card">
            <div>‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π</div>
            <div class="stat-value stat-warning" id="warning-count">0</div>
        </div>
        <div class="stat-card">
            <div>‚ùå –ë—Ä–∞–∫–∞</div>
            <div class="stat-value stat-reject" id="reject-count">0</div>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" data-tab="bolts">–ë–æ–ª—Ç—ã</button>
        <button class="tab-btn" data-tab="nuts">–ì–∞–π–∫–∏</button>
    </div>

    <div class="main-layout">
        <div class="video-panel">
            <video id="video" autoplay muted playsinline></video>
        </div>
        <div class="canvas-panel">
            <canvas id="canvas" width="560" height="420"></canvas>
        </div>
        <div class="current-detections">
            <div class="current-title">–ù–∞–π–¥–µ–Ω–æ —Å–µ–π—á–∞—Å</div>
            <div id="current-list">
                <div style="color:#94a3b8; font-style:italic; text-align:center;">–ù–∏—á–µ–≥–æ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ</div>
            </div>
        </div>
    </div>

    <div class="info-box" id="instructions">
        –ü–æ–ª–æ–∂–∏—Ç–µ –±–æ–ª—Ç –≥–æ–ª–æ–≤–∫–æ–π –≤–≤–µ—Ä—Ö. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —à–µ—Å—Ç–∏–≥—Ä–∞–Ω–Ω—ã–µ –≥–æ–ª–æ–≤–∫–∏ –∏ –∫—Ä—É–≥–ª—ã–µ —Å –∫—Ä–µ—Å—Ç–æ–º (Phillips).
    </div>

    <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞ OpenCV.js‚Ä¶</div>
    <div id="warning"></div>

    <div class="history-section">
        <div class="history-header">
            <div class="history-title">–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–π (<span id="count">0</span>)</div>
            <div>
                <button id="print-stats">üñ®Ô∏è –ü–µ—á–∞—Ç—å</button>
                <button id="export-csv">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
                <button id="save-log">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥</button>
                <button id="view-logs">üìÇ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤</button>
                <button id="clear-history">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
        <div id="detections-list"></div>
    </div>

    <div id="charts-container"></div>

    <div id="line-chart">
        <h3>üìà –õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–µ—Å—Å–∏–π)</h3>
        <canvas id="stat-chart" width="1000" height="300"></canvas>
    </div>

    <div class="footer">
        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OpenCV.js ‚Ä¢ –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
    </div>
</div>

<!-- Modal: —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π -->
<div id="logs-modal">
    <div id="logs-content">
        <span id="logs-close">&times;</span>
        <h2>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ª–æ–≥–∏</h2>
        <div id="logs-list"></div>
    </div>
</div>

<!-- Modal: –¥–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏ -->
<div id="session-modal">
    <div id="session-content">
        <span id="session-close">&times;</span>
        <h2 id="session-title">–î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏</h2>
        <div class="session-sort-controls">
            <button class="sort-btn active" data-sort="time">–ü–æ –≤—Ä–µ–º–µ–Ω–∏</button>
            <button class="sort-btn" data-sort="quality">–ü–æ –∫–∞—á–µ—Å—Ç–≤—É</button>
            <button class="sort-btn" data-sort="confidence">–ü–æ % —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</button>
        </div>
        <div id="session-items"></div>
    </div>
</div>

<!-- OpenCV.js -->
<script src="https://docs.opencv.org/4.x/opencv.js"></script>
<script src="assets/script/index.js"></script>
</body>
</html>